<div class="editor-menu">
  <header class="editor-menu-header">
    <i class="jsz-fa-btn jsz-fa-btn-big fa fa-fw fa-power-off" ng-click="logout()"></i>
    <span class="font-awesome"><i class="fa fa-fw jsz-fa-btn-big fa-user"></i> {{user.email}}</span>
  </header>
  <article class="editor-menu-body">
    <div class="sequences-star">
      <div class="my-star-sequence"
           ng-repeat="s in sequences | filter:{ 'star':true }"
           ng-click="open(s)" ng-class="{'current':s._id==sequence._id}">
        <i class="fa fa-fw aslink"
           ng-class="{'fa-star-o':!s.star ,'fa-star':s.star }"
           ng-click="star($event,s)"></i> {{s.title}}
      </div>
    </div>
    <accordion close-others="false">
      <accordion-group heading="All my sequences" is-open="true">
        <span ng-show="!sequences || sequences.length<=0">Your sequences...</span>
        <div class="my-sequence" ng-repeat="s in sequences"
             ng-click="open(s)" ng-class="{'current':s._id==sequence._id}">
          <i class="fa fa-fw aslink"
             ng-class="{'fa-star-o':!s.star ,'fa-star':s.star }"
             ng-click="star($event,s)"></i> {{s.title}}
        </div>
      </accordion-group>
    </accordion>
  </article>
</div>
<div class="editor-container">
  <div class="menu-hidden"></div>
  <div class="editor-body">
    <div ng-hide="sequence" class="new-sequence new-sequence-evident aslink" ng-click="newSequence()">
      <i class="fa fa-fw fa-plus-circle"></i> Create new sequence
    </div>
    <div ng-show="sequence" class="sequence-editor">
      <div class="top-menu">
        <div class="title">{{sequence.title}}</div>
        <div ng-repeat="b in buttons" ng-click="b.action()"
             class="editor-button" title="{{b.tooltip}}"
             ng-class="{active:!b.isactive || b.isactive(), separator:b.separator}">
          <i class="fa fa-fw" ng-class="b.icon"></i>
        </div>
      </div>
      <div class="sequence">
        <header class="sequence-header">
          <div class="row editor-row">
            <div class="col-md-5">
              <label class="control-label" for="inputTitle">Title</label>
              <p>Set the sequence title to find it simply and fast.</p>
            </div>
            <div class="col-md-7">
              <div class="form-group">
                <input type="text" class="form-control input-sm" id="inputTitle" ng-model="sequence.title" ng-change="changed()">
              </div>
            </div>
          </div>
          <div class="row editor-row">
            <div class="col-md-12">
              <label><input type="checkbox" ng-model="sequence.enabled" ng-change="changed()"> Enabled </label>
              <p>If the sequence is disabled web request will fail.</p>
            </div>
          </div>
          <div class="row editor-row">
            <div class="col-md-12">
              <label> <input type="checkbox" ng-model="sequence.SSL" ng-change="changed()"> SSL </label>
              <p>Make only https requests.</p>
            </div>
          </div>
          <div class="row editor-row">
            <div class="col-md-5">
              <label class="control-label" for="inputTitle">Parameters</label>
              <i class="jsz-fa-btn fa fa-fw fa-plus-circle" ng-click="addParameter()"></i>
              <p>Define the list of parameters and which of these will be public.</p>
              <p>Public (<i class="fa fa-eye"></i>) means that it have to be passed to the web request to obtain results.</p>
            </div>
            <div class="col-md-7">
              <div class="row parameter-row" ng-show="sequence.parameters.length">
                <div class="col col-md-6 parameter-row-label">Name</div>
                <div class="col col-md-6 parameter-row-label">Value</div>
              </div>
              <div class="row parameter-row" ng-repeat="p in sequence.parameters">
                <div class="col col-md-6">
                  <i class="jsz-fa-btn btn-left fa" ng-class="{'fa-eye-slash':p.hidden,'fa-eye':!p.hidden}"  ng-click="togglePublic(p)"></i>
                  <input type="text" class="form-control input-sm" ng-model="p.name" ng-change="changed()">
                </div>
                <div class="col col-md-6">
                  <input type="text" class="form-control input-sm" ng-model="p.value" ng-change="changed()">
                  <i class="jsz-fa-btn btn-right fa fa-remove" ng-click="removeParameter($index)"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="row editor-row editor-row-simply">
            <div class="col-md-12">
              <label>web address to obtain JSON results by sequence</label>
              <pre class="sequence-address">{{address}}</pre>
            </div>
          </div>
        </header>
        <sequence-item ng-repeat="i in sequence.items" data-ng-model="i"
                       last="($index==sequence.items.length-1)"
                       index="$index" collapsed="true"></sequence-item>
        <div class="new-sequence aslink" ng-click="newSequenceItem()">
          <i class="fa fa-fw fa-plus-circle"></i> Append new sequence item
        </div>
      </div>
    </div>
    <pre ng-show="debug">Sequence: {{sequence}}</pre>
  </div>
</div>
